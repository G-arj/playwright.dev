(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(3),o=n(7),r=(n(0),n(145)),c={id:"class-websocket",title:"WebSocket"},i={unversionedId:"api/class-websocket",id:"api/class-websocket",isDocsHomePage:!1,title:"WebSocket",description:"The [WebSocket] class represents websocket connections in the page.",source:"@site/docs/api/class-websocket.md",slug:"/api/class-websocket",permalink:"/python/docs/api/class-websocket",version:"current",sidebar:"api",previous:{title:"Video",permalink:"/python/docs/api/class-video"},next:{title:"Worker",permalink:"/python/docs/api/class-worker"}},s=[{value:"web_socket.on(&quot;close&quot;)",id:"web_socketonclose",children:[]},{value:"web_socket.on(&quot;framereceived&quot;)",id:"web_socketonframereceived",children:[]},{value:"web_socket.on(&quot;framesent&quot;)",id:"web_socketonframesent",children:[]},{value:"web_socket.on(&quot;socketerror&quot;)",id:"web_socketonsocketerror",children:[]},{value:"web_socket.is_closed()",id:"web_socketis_closed",children:[]},{value:"web_socket.url()",id:"web_socketurl",children:[]},{value:"web_socket.wait_for_event(event, **options)",id:"web_socketwait_for_eventevent-options",children:[]},{value:"web_socket.expect_event(event, **options)",id:"web_socketexpect_eventevent-options",children:[]}],l={toc:s};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/python/docs/api/class-websocket",title:"WebSocket"}),"WebSocket")," class represents websocket connections in the page."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketonclose"}),'web_socket.on("close")')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketonframereceived"}),'web_socket.on("framereceived")')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketonframesent"}),'web_socket.on("framesent")')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketonsocketerror"}),'web_socket.on("socketerror")')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketisclosed"}),"web_socket.is_closed()")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketurl"}),"web_socket.url()")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketwaitforeventevent-options"}),"web_socket.wait_for_event(event, **options)")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-websocket#websocketexpecteventevent-options"}),"web_socket.expect_event(event, **options)"))),Object(r.b)("h2",{id:"web_socketonclose"},'web_socket.on("close")'),Object(r.b)("p",null,"Fired when the websocket closes."),Object(r.b)("h2",{id:"web_socketonframereceived"},'web_socket.on("framereceived")'),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"type: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"}),"Dict"),">",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"payload")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"}),"str"),"|","[Buffer]","> frame payload")))),Object(r.b)("p",null,"Fired when the websocket recieves a frame."),Object(r.b)("h2",{id:"web_socketonframesent"},'web_socket.on("framesent")'),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"type: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"}),"Dict"),">",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"payload")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"}),"str"),"|","[Buffer]","> frame payload")))),Object(r.b)("p",null,"Fired when the websocket sends a frame."),Object(r.b)("h2",{id:"web_socketonsocketerror"},'web_socket.on("socketerror")'),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"type: <","[String]",">")),Object(r.b)("p",null,"Fired when the websocket has an error."),Object(r.b)("h2",{id:"web_socketis_closed"},"web_socket.is_closed()"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"returns: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"}),"bool"),">")),Object(r.b)("p",null,"Indicates that the web socket has been closed."),Object(r.b)("h2",{id:"web_socketurl"},"web_socket.url()"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"returns: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"}),"str"),">")),Object(r.b)("p",null,"Contains the URL of the WebSocket."),Object(r.b)("h2",{id:"web_socketwait_for_eventevent-options"},"web_socket.wait_for_event(event, **options)"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"event")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"}),"str"),"> Event name, same one would pass into ",Object(r.b)("inlineCode",{parentName:"li"},"webSocket.on(event)"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"predicate")," <","[Function]","> Receives the event data and resolves to truthy value when the waiting should resolve."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"timeout")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"}),"float"),"> Maximum time to wait for in milliseconds. Defaults to ",Object(r.b)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",Object(r.b)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-browsercontext#browsercontextsetdefaulttimeouttimeout"}),"browser_context.set_default_timeout(timeout)"),"."),Object(r.b)("li",{parentName:"ul"},"returns: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/typing.html#typing.Any",title:"Any"}),"Any"),">")),Object(r.b)("p",null,"Returns the event data value."),Object(r.b)("p",null,"Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the webSocket is closed before the event is fired."),Object(r.b)("h2",{id:"web_socketexpect_eventevent-options"},"web_socket.expect_event(event, **options)"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"event")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"}),"str"),"> Event name, same one typically passed into ",Object(r.b)("inlineCode",{parentName:"li"},"page.on(event)"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"predicate")," <","[Function]","> Receives the event data and resolves to truthy value when the waiting should resolve."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"timeout")," <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"}),"float"),"> Maximum time to wait for in milliseconds. Defaults to ",Object(r.b)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",Object(r.b)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/python/docs/api/class-browsercontext#browsercontextsetdefaulttimeouttimeout"}),"browser_context.set_default_timeout(timeout)"),"."),Object(r.b)("li",{parentName:"ul"},"returns: <",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.python.org/3/reference/datamodel.html#context-managers",title:"Event context manager"}),"EventContextManager"),">")),Object(r.b)("p",null,"Performs action and waits for given ",Object(r.b)("inlineCode",{parentName:"p"},"event")," to fire. If predicate is provided, it passes event's value into the ",Object(r.b)("inlineCode",{parentName:"p"},"predicate")," function and waits for ",Object(r.b)("inlineCode",{parentName:"p"},"predicate(event)")," to return a truthy value. Will throw an error if the socket is closed before the ",Object(r.b)("inlineCode",{parentName:"p"},"event")," is fired."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),'# async\n\nasync with ws.expect_event(event_name) as event_info:\n    await ws.click("button")\nvalue = await event_info.value\n')),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),'# sync\n\nwith ws.expect_event(event_name) as event_info:\n    ws.click("button")\nvalue = event_info.value\n')))}b.isMDXComponent=!0},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),b=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=b(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,m=p["".concat(c,".").concat(d)]||p[d]||u[d]||r;return n?o.a.createElement(m,i(i({ref:t},l),{},{components:n})):o.a.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,c=new Array(r);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var l=2;l<r;l++)c[l]=n[l];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);