<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Playwright Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Playwright Blog Atom Feed">
<script src="js/redirection.js"></script><title data-react-helmet="true">Element selectors | Playwright</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Element selectors | Playwright"><meta data-react-helmet="true" name="description" content="Selectors query elements on the web page for interactions, like page.click(selector[, options]), and to obtain ElementHandle through page.$(selector). Built-in selectors auto-pierce shadow DOM."><meta data-react-helmet="true" property="og:description" content="Selectors query elements on the web page for interactions, like page.click(selector[, options]), and to obtain ElementHandle through page.$(selector). Built-in selectors auto-pierce shadow DOM."><meta data-react-helmet="true" property="og:url" content="https://playwright.dev/docs/next/selectors"><link data-react-helmet="true" rel="shortcut icon" href="/img/playwright-logo.svg"><link data-react-helmet="true" rel="canonical" href="https://playwright.dev/docs/next/selectors"><link rel="stylesheet" href="/styles.da88aef1.css">
<link rel="preload" href="/styles.81697869.js" as="script">
<link rel="preload" href="/runtime~main.b4d9623b.js" as="script">
<link rel="preload" href="/main.ab86dd15.js" as="script">
<link rel="preload" href="/1.2107385d.js" as="script">
<link rel="preload" href="/2.5d351d77.js" as="script">
<link rel="preload" href="/01a85c17.8ca824d5.js" as="script">
<link rel="preload" href="/1a4e3797.9266ecc9.js" as="script">
<link rel="preload" href="/1be78505.18aa5db8.js" as="script">
<link rel="preload" href="/1df93b7f.8e2b9a73.js" as="script">
<link rel="preload" href="/6875c492.bff5ba86.js" as="script">
<link rel="preload" href="/a6aa9e1f.5d4c9811.js" as="script">
<link rel="preload" href="/ccc49370.f390b2b8.js" as="script">
<link rel="preload" href="/fa17a3e5.55c4410f.js" as="script">
<link rel="preload" href="/529.7d5531cc.js" as="script">
<link rel="preload" href="/935f2afb.b055af17.js" as="script">
<link rel="preload" href="/17896441.ef27a594.js" as="script">
<link rel="preload" href="/c1abe836.48cdc8e2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Playwright</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/intro">Docs</a><a class="navbar__item navbar__link" href="/docs/next/api/class-playwright">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/next/why-playwright">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/selectors">Next</a></li><li><a class="dropdown__link" href="/docs/selectors">1.7.0</a></li><li><a class="dropdown__link" href="/docs/1.6.0/selectors">1.6.0</a></li><li><a class="dropdown__link" href="/docs/1.5.0/selectors">1.5.0</a></li><li><a class="dropdown__link" href="/docs/1.4.0/selectors">1.4.0</a></li><li><a class="dropdown__link" href="/docs/1.3.0/selectors">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/selectors">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.0/selectors">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.0/selectors">1.0.0</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_rXwm"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_108q searchBarLoadingRing_2M8r"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Playwright</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/api/class-playwright">API</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/selectors">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/selectors">1.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.6.0/selectors">1.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.5.0/selectors">1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.4.0/selectors">1.4.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.3.0/selectors">1.3.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.2.0/selectors">1.2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.1.0/selectors">1.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.0/selectors">1.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/why-playwright">Why Playwright?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/intro">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/core-concepts">Core concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/debug">Debugging tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/languages">Supported languages</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/actionability">Actionability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/assertions">Assertions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/auth">Authentication</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/selectors">Element selectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/emulation">Device and environment emulation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/extensibility">Extensibility</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/input">Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/multi-pages">Multi-page scenarios</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/navigations">Navigations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/network">Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/pom">Page Object Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/verification">Verification</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/test-runners">Test Runners</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/ci">Continuous Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cli">Command Line Interface</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Playwright <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/selectors">latest version</a></strong> (1.7.0).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_Oumm">Element selectors</h1></header><div class="markdown"><p>Selectors query elements on the web page for interactions, like <a href="/docs/next/api/class-page#pageclickselector-options">page.click(selector[, options])</a>, and to obtain <code>ElementHandle</code> through <a href="/docs/next/api/class-page#pageselector">page.$(selector)</a>. Built-in selectors auto-pierce <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener noreferrer">shadow DOM</a>.</p><ul><li><a href="#working-with-selectors">Working with selectors</a></li><li><a href="#syntax">Syntax</a></li><li><a href="#best-practices">Best practices</a></li><li><a href="#css-selector-engine">CSS selector engine</a></li><li><a href="#xpath-selector-engine">Xpath selector engine</a></li><li><a href="#text-selector-engine">Text selector engine</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="working-with-selectors"></a>Working with selectors<a class="hash-link" href="#working-with-selectors" title="Direct link to heading">#</a></h2><p>Selector describes an element in the page. It can be used to obtain <code>ElementHandle</code> (see <a href="/docs/next/api/class-page#pageselector">page.$(selector)</a> for example) or shortcut element operations to avoid intermediate handle (see <a href="/docs/next/api/class-page#pageclickselector-options">page.click(selector[, options])</a> for example).</p><p>Selector has the following format: <code>engine=body [&gt;&gt; engine=body]*</code>. Here <code>engine</code> is one of the supported <a href="/docs/next/selectors">selector engines</a> (e.g. <code>css</code> or <code>xpath</code>), and <code>body</code> is a selector body in the format of the particular engine. When multiple <code>engine=body</code> clauses are present (separated by <code>&gt;&gt;</code>), next one is queried relative to the previous one&#x27;s result.</p><p>Playwright supports various selector engines:</p><ul><li><a href="#text-selector-engine">Text</a> selectors, for example <code>text=&quot;Log in&quot;</code></li><li><a href="#css-selector-engine">CSS</a> selectors, including the following extensions:<ul><li><a href="#shadow-piercing">Shadow piercing</a> by default and <a href="#css-extension-light"><code>:light</code></a> pseudo-class</li><li><a href="#css-extension-visible"><code>:visible</code></a> pseudo-class</li><li><a href="#css-extension-text"><code>:text</code></a> pseudo-class</li><li><a href="#css-extension-has"><code>:has</code></a> and <a href="#css-extension-is"><code>:is</code></a> pseudo-classes</li><li><a href="#css-extension-position">Position selectors</a>, for example <code>button:right-of(article)</code></li></ul></li><li><a href="#xpath-selector-engine">XPath</a> selectors, for example <code>xpath=//html/body/div</code></li><li><a href="#id-data-testid-data-test-id-data-test-selector-engines">id selectors</a>, for example <code>id=sign-in</code></li><li><a href="/docs/next/extensibility">Custom selector engines</a></li></ul><p>For convenience, selectors in the wrong format are heuristically converted to the right format:</p><ul><li>selector starting with <code>//</code> or <code>..</code> is assumed to be <code>xpath=selector</code>;</li><li>selector starting and ending with a quote (either <code>&quot;</code> or <code>&#x27;</code>) is assumed to be <code>text=selector</code>;</li><li>otherwise selector is assumed to be <code>css=selector</code>.</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;div&#x27; css selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=div&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;//html/body/div&#x27; xpath selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xpath=//html/body/div&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;&quot;foo&quot;&#x27; text selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;text=&quot;foo&quot;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;span&#x27; css selector inside the result of &#x27;//html/body/div&#x27; xpath selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xpath=//html/body/div &gt;&gt; css=span&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// converted to &#x27;css=div&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;div&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// converted to &#x27;xpath=//html/body/div&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;//html/body/div&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// converted to &#x27;text=&quot;foo&quot;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&quot;foo&quot;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;../span&#x27; xpath selector starting with the result of &#x27;div&#x27; css selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;div &gt;&gt; ../span&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &#x27;span&#x27; css selector inside the div handle</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> handle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> divHandle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=span&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="syntax"></a>Syntax<a class="hash-link" href="#syntax" title="Direct link to heading">#</a></h2><p>Selectors are defined by selector engine name and selector body, <code>engine=body</code>.</p><ul><li><code>engine</code> refers to one of the supported engines<ul><li>Built-in selector engines: <a href="#css-selector-engine">css</a>, <a href="#text-selector-engine">text</a>, <a href="#xpath-selector-engine">xpath</a> and <a href="#id-data-testid-data-test-id-data-test-selector-engines">id selectors</a></li><li>Learn more about <a href="/docs/next/extensibility">custom selector engines</a></li></ul></li><li><code>body</code> refers to the query string for the respective engine<ul><li>For <code>text</code>, body is the text content</li><li>For <code>css</code>, body is a <a href="https://developer.mozilla.org/en/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener noreferrer">css selector</a></li></ul></li></ul><p>Body format is assumed to ignore leading and trailing white spaces, so that extra whitespace can be added for readability.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="short-forms"></a>Short-forms<a class="hash-link" href="#short-forms" title="Direct link to heading">#</a></h3><p>For convenience, common selectors have short-forms:</p><ul><li>Selector starting with <code>//</code> or <code>..</code> is assumed to be <code>xpath=selector</code><ul><li>Example: <code>&#x27;//html&#x27;</code> is converted to <code>&#x27;xpath=//html&#x27;</code>.</li></ul></li><li>Selector starting and ending with a quote (either <code>&quot;</code> or <code>&#x27;</code>) is assumed to be <code>text=selector</code><ul><li>Example: <code>&#x27;&quot;foo&quot;&#x27;</code> is converted to <code>&#x27;text=&quot;foo&quot;&#x27;</code>.</li></ul></li><li>Otherwise, selector is assumed to be <code>css=selector</code><ul><li>Example: <code>&#x27;div&#x27;</code> is converted to <code>&#x27;css=div&#x27;</code>.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="chaining-selectors"></a>Chaining selectors<a class="hash-link" href="#chaining-selectors" title="Direct link to heading">#</a></h3><p>Selectors defined as <code>engine=body</code> or in short-form can be combined with the <code>&gt;&gt;</code> token, e.g. <code>selector1 &gt;&gt; selector2 &gt;&gt; selectors3</code>. When selectors are chained, next one is queried relative to the previous one&#x27;s result.</p><p>For example,</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">css=article &gt;&gt; css=.bar &gt; .baz &gt;&gt; css=span[attr=value]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;article&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.bar &gt; .baz&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;span[attr=value]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If a selector needs to include <code>&gt;&gt;</code> in the body, it should be escaped inside a string to not be confused with chaining separator, e.g. <code>text=&quot;some &gt;&gt; text&quot;</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="intermediate-matches"></a>Intermediate matches<a class="hash-link" href="#intermediate-matches" title="Direct link to heading">#</a></h3><p>By default, chained selectors resolve to an element queried by the last selector. A selector can be prefixed with <code>*</code> to capture elements that are queried by an intermediate selector.</p><p>For example, <code>css=article &gt;&gt; text=Hello</code> captures the element with the text <code>Hello</code>, and <code>*css=article &gt;&gt; text=Hello</code> (note the <code>*</code>) captures the <code>article</code> element that contains some element with the text <code>Hello</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="best-practices"></a>Best practices<a class="hash-link" href="#best-practices" title="Direct link to heading">#</a></h2><p>The choice of selectors determines the resiliency of automation scripts. To reduce the maintenance burden, we recommend prioritizing user-facing attributes and explicit contracts.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="prioritize-user-facing-attributes"></a>Prioritize user-facing attributes<a class="hash-link" href="#prioritize-user-facing-attributes" title="Direct link to heading">#</a></h3><p>Attributes like text content, input placeholder, accessibility roles and labels are user-facing attributes that change rarely. These attributes are not impacted by DOM structure changes.</p><p>The following examples use the built-in <a href="#text-selector-engine">text</a> and <a href="#css-selector-engine">css</a> selector engines.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &quot;Login&quot; text selector</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;text=&quot;Login&quot;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&quot;Login&quot;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// short-form</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &quot;Search GitHub&quot; placeholder attribute</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=[placeholder=&quot;Search GitHub&quot;]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[placeholder=&quot;Search GitHub&quot;]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// short-form</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries &quot;Close&quot; accessibility label</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=[aria-label=&quot;Close&quot;]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[aria-label=&quot;Close&quot;]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// short-form</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// combine role and text queries</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=nav &gt;&gt; text=Login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="define-explicit-contract"></a>Define explicit contract<a class="hash-link" href="#define-explicit-contract" title="Direct link to heading">#</a></h3><p>When user-facing attributes change frequently, it is recommended to use explicit test ids, like <code>data-test-id</code>. These <code>data-*</code> attributes are supported by the <a href="#css-selector-engine">css</a> and <a href="#id-data-testid-data-test-id-data-test-selector-engines">id selectors</a>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">data-test-id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">directions</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">ItinÃ©raire</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries data-test-id attribute with css</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;css=[data-test-id=directions]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[data-test-id=directions]&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// short-form</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// queries data-test-id with id</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data-test-id=directions&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="avoid-selectors-tied-to-implementation"></a>Avoid selectors tied to implementation<a class="hash-link" href="#avoid-selectors-tied-to-implementation" title="Direct link to heading">#</a></h3><p><a href="#xpath-selector-engine">xpath</a> and <a href="#css-selector-engine">css</a> can be tied to the DOM structure or implementation. These selectors can break when the DOM structure changes.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// avoid long css or xpath chains</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#tsf &gt; div:nth-child(2) &gt; div.A8SBwf &gt; div.RNNXgb &gt; div &gt; div.a4bIc &gt; input&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;//*[@id=&quot;tsf&quot;]/div[2]/div[1]/div[1]/div/div[2]/input&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-selector-engine"></a>CSS selector engine<a class="hash-link" href="#css-selector-engine" title="Direct link to heading">#</a></h2><p><code>css</code> is a default engine - any malformed selector not starting with <code>//</code> nor starting and ending with a quote is assumed to be a css selector. For example, Playwright converts <code>&#x27;span &gt; button&#x27;</code> to <code>&#x27;css=span &gt; button&#x27;</code>.</p><p>Playwright augments standard CSS selectors in two ways, see below for more details:</p><ul><li><code>css</code> engine pierces open shadow DOM by default.</li><li>Playwright adds a few custom pseudo-classes like <code>:visible</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="shadow-piercing"></a>Shadow piercing<a class="hash-link" href="#shadow-piercing" title="Direct link to heading">#</a></h3><p><code>css:light</code> engine is equivalent to <a href="https://developer.mozilla.org/en/docs/Web/API/Document/querySelector" target="_blank" rel="noopener noreferrer"><code>Document.querySelector</code></a> and behaves according to the CSS spec. However, it does not pierce shadow roots, which may be inconvenient when working with <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener noreferrer">Shadow DOM and Web Components</a>. For that reason, <code>css</code> engine pierces shadow roots. More specifically, any <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_combinator" target="_blank" rel="noopener noreferrer">Descendant combinator</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator" target="_blank" rel="noopener noreferrer">Child combinator</a> pierces an arbitrary number of open shadow roots, including the implicit descendant combinator at the start of the selector.</p><p><code>css</code> engine first searches for elements in the light dom in the iteration order, and then recursively inside open shadow roots in the iteration order. It does not search inside closed shadow roots or iframes.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">article</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">In the light dom</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">slot</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">myslot</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">In the light dom, but goes into the shadow slot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">open</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">mode</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">shadow</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">root</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">in-the-shadow</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">span</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">content</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        In the shadow dom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">open</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">mode</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">shadow</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">root</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">li</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">target</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Deep in the shadow</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">li</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">open</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">mode</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">shadow</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">root</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">span</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">slot</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">myslot</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">slot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">open</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">mode</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">shadow</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">root</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">article</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Note that <code>&lt;open mode shadow root&gt;</code> is not an html element, but rather a shadow root created with <code>element.attachShadow({mode: &#x27;open&#x27;})</code>.</p><ul><li>Both <code>&quot;css=article div&quot;</code> and <code>&quot;css:light=article div&quot;</code> match the first <code>&lt;div&gt;In the light dom&lt;/div&gt;</code>.</li><li>Both <code>&quot;css=article &gt; div&quot;</code> and <code>&quot;css:light=article &gt; div&quot;</code> match two <code>div</code> elements that are direct children of the <code>article</code>.</li><li><code>&quot;css=article .in-the-shadow&quot;</code> matches the <code>&lt;div class=&#x27;in-the-shadow&#x27;&gt;</code>, piercing the shadow root, while <code>&quot;css:light=article .in-the-shadow&quot;</code> does not match anything.</li><li><code>&quot;css:light=article div &gt; span&quot;</code> does not match anything, because both light-dom <code>div</code> elements do not contain a <code>span</code>.</li><li><code>&quot;css=article div &gt; span&quot;</code> matches the <code>&lt;span class=&#x27;content&#x27;&gt;</code>, piercing the shadow root.</li><li><code>&quot;css=article &gt; .in-the-shadow&quot;</code> does not match anything, because <code>&lt;div class=&#x27;in-the-shadow&#x27;&gt;</code> is not a direct child of <code>article</code></li><li><code>&quot;css:light=article &gt; .in-the-shadow&quot;</code> does not match anything.</li><li><code>&quot;css=article li#target&quot;</code> matches the <code>&lt;li id=&#x27;target&#x27;&gt;Deep in the shadow&lt;/li&gt;</code>, piercing two shadow roots.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-visible"></a>CSS extension: visible<a class="hash-link" href="#css-extension-visible" title="Direct link to heading">#</a></h3><p>The <code>:visible</code> pseudo-class matches elements that are visible as defined in the <a href="/docs/next/actionability#visible">actionability</a> guide. For example, <code>input</code> matches all the inputs on the page, while <code>input:visible</code> matches only visible inputs. This is useful to distinguish elements that are very similar but differ in visibility, however it&#x27;s usually better to follow <a href="#best-practices">best practices</a> and find another way to select the element.</p><p>Consider a page with two buttons, first invisible and second visible.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag style-attr language-css attr-name" style="color:rgb(255, 203, 107)"> </span><span class="token tag style-attr language-css attr-name" style="color:rgb(255, 203, 107)">style</span><span class="token tag style-attr language-css punctuation" style="color:rgb(199, 146, 234)">=&#x27;</span><span class="token tag style-attr language-css attr-value property" style="color:rgb(255, 85, 114)">display</span><span class="token tag style-attr language-css attr-value punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token tag style-attr language-css attr-value" style="color:rgb(255, 85, 114)"> none</span><span class="token tag style-attr language-css punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Invisible</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Visible</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li><p>This will find the first button, because it is the first one in DOM order. Then it will wait for the button to become visible before clicking, or timeout while waiting:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;button&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>This will find a second button, because it is visible, and then click it.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;button:visible&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><p>Use <code>:visible</code> with caution, because it has two major drawbacks:</p><ul><li>When elements change their visibility dynamically, <code>:visible</code> will give upredictable results based on the timing.</li><li><code>:visible</code> forces a layout and may lead to querying being slow, especially when used with <code>page.waitForSelector(selector[, options])</code> method.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-text"></a>CSS extension: text<a class="hash-link" href="#css-extension-text" title="Direct link to heading">#</a></h3><p>The <code>:text</code> pseudo-class matches elements that have a text node child with specific text. It is similar to the <a href="#text-selector-engine">text</a> engine. There are a few variations that support different arguments:</p><ul><li><code>:text(&quot;substring&quot;)</code> - Matches when element&#x27;s text contains &quot;substring&quot; somewhere. Matching is case-insensitive. Matching also normalizes whitespace, for example it turns multiple spaces into one, trusn line breaks into spaces and ignores leading and trailing whitespace.</li><li><code>:text-is(&quot;string&quot;)</code> - Matches when element&#x27;s text equals the &quot;string&quot;. Matching is case-insensitive and normalizes whitespace.</li><li><code>button:text(&quot;Sign in&quot;)</code> - Text selector may be combined with regular CSS.</li><li><code>:text-matches(&quot;[+-]?\\d+&quot;)</code> - Matches text against a regular expression. Note that special characters like back-slash <code>\</code>, quotes <code>&quot;</code>, square brackets <code>[]</code> and more should be escaped. Learn more about <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer">regular expressions</a>.</li><li><code>:text-matches(&quot;value&quot;, &quot;i&quot;)</code> - Matches text against a regular expression with specified flags.</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Click a button with text &quot;Sign in&quot;.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;button:text(&quot;Sign in&quot;)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-has"></a>CSS extension: has<a class="hash-link" href="#css-extension-has" title="Direct link to heading">#</a></h3><p>The <code>:has()</code> pseudo-class is an <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has" target="_blank" rel="noopener noreferrer">experimental CSS pseudo-class</a> that is supported by Playwright.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Returns text content of an &lt;article&gt; element that has a &lt;div class=promo&gt; inside.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">textContent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;article:has(div.promo)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-is"></a>CSS extension: is<a class="hash-link" href="#css-extension-is" title="Direct link to heading">#</a></h3><p>The <code>:is()</code> pseudo-class is an <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is" target="_blank" rel="noopener noreferrer">experimental CSS pseudo-class</a> that is supported by Playwright.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Clicks a &lt;button&gt; that has either a &quot;Log in&quot; or &quot;Sign in&quot; text.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;button:is(:text(&quot;Log in&quot;), :text(&quot;Sign in&quot;))&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-light"></a>CSS extension: light<a class="hash-link" href="#css-extension-light" title="Direct link to heading">#</a></h3><p><code>css</code> engine <a href="#shadow-piercing">pierces shadow</a> by default. It is possible to disable this behavior by wrapping a selector in <code>:light</code> pseudo-class: <code>:light(section &gt; button.class)</code> matches in light DOM only.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;:light(.article &gt; .header)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="css-extension-position"></a>CSS extension: position<a class="hash-link" href="#css-extension-position" title="Direct link to heading">#</a></h3><p>Playwright provides position selectors based on the page layout. These can be combined with regular CSS for better results, for example <code>input:right-of(:text(&quot;Password&quot;))</code> matches an input field that is to the right of text &quot;Password&quot;.</p><p>Note that position selectors depend on the page layout and may produce unexpected results. For example, a different element could be matched when layout changes by one pixel.</p><p>Position selectors use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">bounding client rect</a> to compute distance and relative position of the elements.</p><ul><li><code>:right-of(inner &gt; selector)</code> - Matches elements that are to the right of any element matching the inner selector.</li><li><code>:left-of(inner &gt; selector)</code> - Matches elements that are to the left of any element matching the inner selector.</li><li><code>:above(inner &gt; selector)</code> - Matches elements that are above any of the elements matching the inner selector.</li><li><code>:below(inner &gt; selector)</code> - Matches elements that are below any of the elements matching the inner selector.</li><li><code>:near(inner &gt; selector)</code> - Matches elements that are near (within 50 CSS pixels) any of the elements matching the inner selector.</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Fill an input to the right of &quot;Username&quot;.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;input:right-of(:text(&quot;Username&quot;))&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Click a button near the promo card.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;button:near(.promo-card)&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="xpath-selector-engine"></a>Xpath selector engine<a class="hash-link" href="#xpath-selector-engine" title="Direct link to heading">#</a></h2><p>XPath engine is equivalent to <a href="https://developer.mozilla.org/en/docs/Web/API/Document/evaluate" target="_blank" rel="noopener noreferrer"><code>Document.evaluate</code></a>. Example: <code>xpath=//html/body</code>.</p><p>Malformed selector starting with <code>//</code> or <code>..</code> is assumed to be an xpath selector. For example, Playwright converts <code>&#x27;//html/body&#x27;</code> to <code>&#x27;xpath=//html/body&#x27;</code>.</p><p>Note that <code>xpath</code> does not pierce shadow roots.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="text-selector-engine"></a>Text selector engine<a class="hash-link" href="#text-selector-engine" title="Direct link to heading">#</a></h2><p>Text engine finds an element that contains a text node with the passed text. For example, <code>page.click(&#x27;text=Login&#x27;)</code> clicks on a login button, and <code>page.waitForSelector(&#x27;&quot;lazy loaded text&quot;)</code> waits for the <code>&quot;lazy loaded text&quot;</code> to appear in the page.</p><ul><li>By default, the match is case-insensitive, ignores leading/trailing whitespace and searches for a substring. This means <code>text= Login</code> matches <code>&lt;button&gt;Button loGIN (click me)&lt;/button&gt;</code>.</li><li>Text body can be escaped with single or double quotes for precise matching, insisting on exact match, including specified whitespace and case. This means <code>text=&quot;Login &quot;</code> will only match <code>&lt;button&gt;Login &lt;/button&gt;</code> with exactly one space after &quot;Login&quot;. Quoted text follows the usual escaping rules, e.g. use <code>\&quot;</code> to escape double quote in a double-quoted string: <code>text=&quot;foo\&quot;bar&quot;</code>.</li><li>Text body can also be a JavaScript-like regex wrapped in <code>/</code> symbols. This means <code>text=/^\\s*Login$/i</code> will match <code>&lt;button&gt; loGIN&lt;/button&gt;</code> with any number of spaces before &quot;Login&quot; and no spaces after.</li><li>Input elements of the type <code>button</code> and <code>submit</code> are rendered with their value as text, and text engine finds them. For example, <code>text=Login</code> matches <code>&lt;input type=button value=&quot;Login&quot;&gt;</code>.</li></ul><p>Malformed selector starting and ending with a quote (either <code>&quot;</code> or <code>&#x27;</code>) is assumed to be a text selector. For example, Playwright converts <code>page.click(&#x27;&quot;Login&quot;&#x27;)</code> to <code>page.click(&#x27;text=&quot;Login&quot;&#x27;)</code>.</p><p><code>text</code> engine open pierces shadow roots similarly to <code>css</code>, while <code>text:light</code> does not. Text engine first searches for elements in the light dom in the iteration order, and then recursively inside open shadow roots in the iteration order. It does not search inside closed shadow roots or iframes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="id-data-testid-data-test-id-data-test-selector-engines"></a>id, data-testid, data-test-id, data-test selector engines<a class="hash-link" href="#id-data-testid-data-test-id-data-test-selector-engines" title="Direct link to heading">#</a></h3><p>Attribute engines are selecting based on the corresponding attribute value. For example: <code>data-test-id=foo</code> is equivalent to <code>css=[data-test-id=&quot;foo&quot;]</code>, and <code>id:light=foo</code> is equivalent to <code>css:light=[id=&quot;foo&quot;]</code>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/auth"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Authentication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/emulation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Device and environment emulation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#working-with-selectors" class="table-of-contents__link">Working with selectors</a></li><li><a href="#syntax" class="table-of-contents__link">Syntax</a><ul><li><a href="#short-forms" class="table-of-contents__link">Short-forms</a></li><li><a href="#chaining-selectors" class="table-of-contents__link">Chaining selectors</a></li><li><a href="#intermediate-matches" class="table-of-contents__link">Intermediate matches</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link">Best practices</a><ul><li><a href="#prioritize-user-facing-attributes" class="table-of-contents__link">Prioritize user-facing attributes</a></li><li><a href="#define-explicit-contract" class="table-of-contents__link">Define explicit contract</a></li><li><a href="#avoid-selectors-tied-to-implementation" class="table-of-contents__link">Avoid selectors tied to implementation</a></li></ul></li><li><a href="#css-selector-engine" class="table-of-contents__link">CSS selector engine</a><ul><li><a href="#shadow-piercing" class="table-of-contents__link">Shadow piercing</a></li><li><a href="#css-extension-visible" class="table-of-contents__link">CSS extension: visible</a></li><li><a href="#css-extension-text" class="table-of-contents__link">CSS extension: text</a></li><li><a href="#css-extension-has" class="table-of-contents__link">CSS extension: has</a></li><li><a href="#css-extension-is" class="table-of-contents__link">CSS extension: is</a></li><li><a href="#css-extension-light" class="table-of-contents__link">CSS extension: light</a></li><li><a href="#css-extension-position" class="table-of-contents__link">CSS extension: position</a></li></ul></li><li><a href="#xpath-selector-engine" class="table-of-contents__link">Xpath selector engine</a></li><li><a href="#text-selector-engine" class="table-of-contents__link">Text selector engine</a><ul><li><a href="#id-data-testid-data-test-id-data-test-selector-engines" class="table-of-contents__link">id, data-testid, data-test-id, data-test selector engines</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/class-playwright">API reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://aka.ms/playwright-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/playwrightweb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft</div></div></div></footer></div>
<script src="/styles.81697869.js"></script>
<script src="/runtime~main.b4d9623b.js"></script>
<script src="/main.ab86dd15.js"></script>
<script src="/1.2107385d.js"></script>
<script src="/2.5d351d77.js"></script>
<script src="/01a85c17.8ca824d5.js"></script>
<script src="/1a4e3797.9266ecc9.js"></script>
<script src="/1be78505.18aa5db8.js"></script>
<script src="/1df93b7f.8e2b9a73.js"></script>
<script src="/6875c492.bff5ba86.js"></script>
<script src="/a6aa9e1f.5d4c9811.js"></script>
<script src="/ccc49370.f390b2b8.js"></script>
<script src="/fa17a3e5.55c4410f.js"></script>
<script src="/529.7d5531cc.js"></script>
<script src="/935f2afb.b055af17.js"></script>
<script src="/17896441.ef27a594.js"></script>
<script src="/c1abe836.48cdc8e2.js"></script>
</body>
</html>