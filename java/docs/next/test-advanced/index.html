<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/java/blog/rss.xml" title="Playwright Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/java/blog/atom.xml" title="Playwright Blog Atom Feed">
<script src="js/redirection.js"></script><title data-react-helmet="true">Advanced Configuration | Playwright</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Advanced Configuration | Playwright"><meta data-react-helmet="true" name="description" content="- Projects"><meta data-react-helmet="true" property="og:description" content="- Projects"><meta data-react-helmet="true" property="og:url" content="https://playwright.dev/java/docs/next/test-advanced"><link data-react-helmet="true" rel="shortcut icon" href="/java/img/playwright-logo.svg"><link data-react-helmet="true" rel="canonical" href="https://playwright.dev/java/docs/next/test-advanced"><link rel="stylesheet" href="/java/styles.d443ede1.css">
<link rel="preload" href="/java/styles.beab08b5.js" as="script">
<link rel="preload" href="/java/runtime~main.0c2e6e04.js" as="script">
<link rel="preload" href="/java/main.c185f116.js" as="script">
<link rel="preload" href="/java/1.12a5fa38.js" as="script">
<link rel="preload" href="/java/2.450f33f3.js" as="script">
<link rel="preload" href="/java/1be78505.e161633c.js" as="script">
<link rel="preload" href="/java/6875c492.ed4c06dd.js" as="script">
<link rel="preload" href="/java/a6aa9e1f.daebc389.js" as="script">
<link rel="preload" href="/java/ccc49370.2387442f.js" as="script">
<link rel="preload" href="/java/214.47f4e065.js" as="script">
<link rel="preload" href="/java/935f2afb.b018021f.js" as="script">
<link rel="preload" href="/java/17896441.169aa674.js" as="script">
<link rel="preload" href="/java/c4cec173.0c43242f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/java/"><img src="/java/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/java/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Playwright for Java</strong></a><a class="navbar__item navbar__link" href="/java/docs/next/intro">Docs</a><a class="navbar__item navbar__link" href="/java/docs/next/api/class-playwright">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/java/docs/next/why-playwright">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/java/docs/next/test-advanced">Next</a></li><li><a class="dropdown__link" href="/java/docs/why-playwright">1.11.0</a></li><li><a class="dropdown__link" href="/java/docs/1.10.0/why-playwright">1.10.0</a></li><li><a class="dropdown__link" href="/java/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_rXwm"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_108q searchBarLoadingRing_2M8r"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/java/"><img src="/java/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/java/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Playwright for Java</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/java/docs/next/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/java/docs/next/api/class-playwright">API</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/java/docs/next/test-advanced">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/java/docs/why-playwright">1.11.0</a></li><li class="menu__list-item"><a class="menu__link" href="/java/docs/1.10.0/why-playwright">1.10.0</a></li><li class="menu__list-item"><a class="menu__link" href="/java/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Playwright <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/java/docs/why-playwright">latest version</a></strong> (1.11.0).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_Oumm">Advanced Configuration</h1></header><div class="markdown"><ul><li><a href="#projects">Projects</a></li><li><a href="#workerinfo-object">workerInfo object</a></li><li><a href="#testinfo-object">testInfo object</a></li><li><a href="#global-setup-and-teardown">Global setup and teardown</a></li><li><a href="#fixture-options">Fixture options</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="projects"></a>Projects<a class="hash-link" href="#projects" title="Direct link to heading">#</a></h2><p>Playwright Test supports running multiple test projects at the same time. This is useful for running the same tests in multiple configurations. For example, consider running tests against multiple versions of the database.</p><p>To make use of this feature, we will declare an &quot;option fixture&quot; for the database version, and use it in the tests.</p><p>We can use our fixtures in the test.</p><p>Now, we can run test in multiple configurations by using projects.</p><p>Each project can be configured separately, and run different set of tests with different parameters. Supported options are <code>name</code>, <code>outputDir</code>, <code>repeatEach</code>, <code>retries</code>, <code>snapshotDir</code>, <code>testDir</code>, <code>testIgnore</code>, <code>testMatch</code> and <code>timeout</code>. See <a href="#configuration-object">configuration object</a> for detailed description.</p><p>You can run all projects or just a single one:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-sh codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run both projects - each test will be run twice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">npx playwright test</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run a single project - each test will be run once</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">npx playwright test --project=v2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="workerinfo-object"></a>workerInfo object<a class="hash-link" href="#workerinfo-object" title="Direct link to heading">#</a></h2><p>Depending on the configuration and failures, Playwright Test might use different number of worker processes to run all the tests. For example, Playwright Test will always start a new worker process after a failing test.</p><p>Worker-scoped fixtures and <code>beforeAll</code> and <code>afterAll</code> hooks receive <code>workerInfo</code> parameter. The following information is accessible from the <code>workerInfo</code>:</p><ul><li><code>config</code> - <a href="#configuration-object">Configuration object</a>.</li><li><code>project</code> - Specific <a href="#projects">project</a> configuration for this worker. Different projects are always run in separate processes.</li><li><code>workerIndex: number</code> - A unique sequential index assigned to the worker process.</li></ul><p>Consider an example where we run a new http server per worker process, and use <code>workerIndex</code> to produce a unique port number:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="testinfo-object"></a>testInfo object<a class="hash-link" href="#testinfo-object" title="Direct link to heading">#</a></h2><p>Test fixtures and <code>beforeEach</code> and <code>afterEach</code> hooks receive <code>testInfo</code> parameter. It is also available to the test function as a second parameter.</p><p>In addition to everything from the <a href="#workerinfo"><code>workerInfo</code></a>, the following information is accessible before and during the test:</p><ul><li><code>title: string</code> - Test title.</li><li><code>file: string</code> - Full path to the test file.</li><li><code>line: number</code> - Line number of the test declaration.</li><li><code>column: number</code> - Column number of the test declaration.</li><li><code>fn: Function</code> - Test body function.</li><li><code>repeatEachIndex: number</code> - The sequential repeat index.</li><li><code>retry: number</code> - The sequential number of the test retry (zero means first run).</li><li><code>expectedStatus: &#x27;passed&#x27; | &#x27;failed&#x27; | &#x27;timedOut&#x27;</code> - Whether this test is expected to pass, fail or timeout.</li><li><code>timeout: number</code> - Test timeout.</li><li><code>annotations</code> - <a href="#annotations">Annotations</a> that were added to the test.</li><li><code>snapshotPathSegment: string</code> - Relative path, used to locate snapshots for the test.</li><li><code>snapshotPath(...pathSegments: string[])</code> - Function that returns the full path to a particular snapshot for the test.</li><li><code>outputDir: string</code> - Absolute path to the output directory for this test run.</li><li><code>outputPath(...pathSegments: string[])</code> - Function that returns the full path to a particular output artifact for the test.</li></ul><p>The following information is accessible after the test body has finished, in fixture teardown:</p><ul><li><code>duration: number</code> - test running time in milliseconds.</li><li><code>status: &#x27;passed&#x27; | &#x27;failed&#x27; | &#x27;timedOut&#x27;</code> - the actual test result.</li><li><code>error</code> - any error thrown by the test body.</li><li><code>stdout: (string | Buffer)[]</code> - array of stdout chunks collected during the test run.</li><li><code>stderr: (string | Buffer)[]</code> - array of stderr chunks collected during the test run.</li></ul><p>Here is an example test that saves some information:</p><p>Here is an example fixture that automatically saves debug logs when the test fails:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="global-setup-and-teardown"></a>Global setup and teardown<a class="hash-link" href="#global-setup-and-teardown" title="Direct link to heading">#</a></h2><p>To set something up once before running all tests, use <code>globalSetup</code> option in the <a href="#writing-a-configuration-file">configuration file</a>. Similarly, use <code>globalTeardown</code> to run something once after all the tests.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="fixture-options"></a>Fixture options<a class="hash-link" href="#fixture-options" title="Direct link to heading">#</a></h2><p>It is common for the <a href="#fixtures">fixtures</a> to be configurable, based on various test needs. Playwright Test allows creating &quot;options&quot; fixture for this purpose.</p><p>We can now pass the option value with <code>test.use()</code>.</p><p>In addition to <code>test.use()</code>, we can also specify options in the configuration file.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3mK7" id="add-custom-matchers-using-expectextend"></a>Add custom matchers using expect.extend<a class="hash-link" href="#add-custom-matchers-using-expectextend" title="Direct link to heading">#</a></h3><p>Playwright Test uses <a href="https://jestjs.io/docs/expect" target="_blank" rel="noopener noreferrer">expect</a> under the hood which has the functionality to extend it with <a href="https://jestjs.io/docs/expect#expectextendmatchers" target="_blank" rel="noopener noreferrer">custom matchers</a>. See the following example where a custom <code>toBeWithinRange</code> function gets added.</p><p>To import expect matching libraries like <a href="https://github.com/jest-community/jest-extended#installation" target="_blank" rel="noopener noreferrer">jest-extended</a> you can import it from your <code>globals.d.ts</code>:</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#projects" class="table-of-contents__link">Projects</a></li><li><a href="#workerinfo-object" class="table-of-contents__link">workerInfo object</a></li><li><a href="#testinfo-object" class="table-of-contents__link">testInfo object</a></li><li><a href="#global-setup-and-teardown" class="table-of-contents__link">Global setup and teardown</a></li><li><a href="#fixture-options" class="table-of-contents__link">Fixture options</a><ul><li><a href="#add-custom-matchers-using-expectextend" class="table-of-contents__link">Add custom matchers using expect.extend</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/java/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/java/docs/api/class-playwright">API reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://aka.ms/playwright-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/playwrightweb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/playwright-java" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft</div></div></div></footer></div>
<script src="/java/styles.beab08b5.js"></script>
<script src="/java/runtime~main.0c2e6e04.js"></script>
<script src="/java/main.c185f116.js"></script>
<script src="/java/1.12a5fa38.js"></script>
<script src="/java/2.450f33f3.js"></script>
<script src="/java/1be78505.e161633c.js"></script>
<script src="/java/6875c492.ed4c06dd.js"></script>
<script src="/java/a6aa9e1f.daebc389.js"></script>
<script src="/java/ccc49370.2387442f.js"></script>
<script src="/java/214.47f4e065.js"></script>
<script src="/java/935f2afb.b018021f.js"></script>
<script src="/java/17896441.169aa674.js"></script>
<script src="/java/c4cec173.0c43242f.js"></script>
</body>
</html>