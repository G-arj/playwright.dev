<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="search" type="application/opensearchdescription+xml" title="Playwright" href="/playwright/opensearch.xml">
<script src="js/redirection.js"></script><title data-react-helmet="true">Continuous Integration | Playwright</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.3.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.3.0"><meta data-react-helmet="true" property="og:title" content="Continuous Integration | Playwright"><meta data-react-helmet="true" name="description" content="Playwright tests can be executed in CI environments. We have created sample"><meta data-react-helmet="true" property="og:description" content="Playwright tests can be executed in CI environments. We have created sample"><meta data-react-helmet="true" property="og:url" content="https://microsoft.github.io/playwright/docs/1.3.0/ci"><link data-react-helmet="true" rel="shortcut icon" href="/playwright/img/playwright-logo.svg"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://microsoft.github.io/playwright/docs/1.3.0/ci"><link rel="stylesheet" href="/playwright/styles.3a0428f6.css">
<link rel="preload" href="/playwright/styles.b0f0421f.js" as="script">
<link rel="preload" href="/playwright/runtime~main.6c9d03b3.js" as="script">
<link rel="preload" href="/playwright/main.2f8db9db.js" as="script">
<link rel="preload" href="/playwright/1.b8352433.js" as="script">
<link rel="preload" href="/playwright/2.a926225b.js" as="script">
<link rel="preload" href="/playwright/806.43b743a8.js" as="script">
<link rel="preload" href="/playwright/809.0c99d459.js" as="script">
<link rel="preload" href="/playwright/5188416b.77c6a0bf.js" as="script">
<link rel="preload" href="/playwright/17896441.a1329f6b.js" as="script">
<link rel="preload" href="/playwright/bc276927.b632cf0f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/playwright/"><img class="navbar__logo" src="/playwright/img/playwright-logo.svg" alt="Playwright logo"><strong class="navbar__title">Playwright</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/playwright/docs/1.3.0/intro">Docs</a><a class="navbar__item navbar__link" href="/playwright/docs/1.3.0/api/playwright-module">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/playwright/docs/1.3.0/intro">1.3.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/playwright/docs/next/ci">Next</a></li><li><a class="dropdown__link" href="/playwright/docs/ci">1.6.2</a></li><li><a class="dropdown__link" href="/playwright/docs/1.6.1/ci">1.6.1</a></li><li><a class="dropdown__link" href="/playwright/docs/1.6.0/ci">1.6.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.5.2/ci">1.5.2</a></li><li><a class="dropdown__link" href="/playwright/docs/1.5.0/ci">1.5.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.4.2/ci">1.4.2</a></li><li><a class="dropdown__link" href="/playwright/docs/1.4.0/ci">1.4.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/playwright/docs/1.3.0/ci">1.3.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.2.0/ci">1.2.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.1.0/ci">1.1.0</a></li><li><a class="dropdown__link" href="/playwright/docs/1.0.0/ci">1.0.0</a></li><li><a class="dropdown__link" href="/playwright/docs/0.18.0/ci">0.18.0</a></li><li><a class="dropdown__link" href="/playwright/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/playwright/"><img class="navbar__logo" src="/playwright/img/playwright-logo.svg" alt="Playwright logo"><strong class="navbar__title">Playwright</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/playwright/docs/1.3.0/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.3.0/api/playwright-module">API</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/next/ci">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/ci">1.6.2</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.6.1/ci">1.6.1</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.6.0/ci">1.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.5.2/ci">1.5.2</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.5.0/ci">1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.4.2/ci">1.4.2</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.4.0/ci">1.4.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/playwright/docs/1.3.0/ci">1.3.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.2.0/ci">1.2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.1.0/ci">1.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/1.0.0/ci">1.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/docs/0.18.0/ci">0.18.0</a></li><li class="menu__list-item"><a class="menu__link" href="/playwright/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/intro">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/core-concepts">Core concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/debug">Debugging tools</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/selectors">Selector engines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/input">Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/emulation">Device and environment emulation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/network">Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/assertions">Assertions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/verification">Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/loading">Navigation and loading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/multi-pages">Multi-page scenarios</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/test-runners">Test Runners</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/docker/README">Running Playwright in Docker</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/playwright/docs/1.3.0/ci">Continuous Integration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/actionability">Actionability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/installation">Advanced installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/playwright/docs/1.3.0/extensibility">Extensibility</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Playwright <strong>1.3.0</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/playwright/docs/ci">latest version</a></strong> (1.6.2).</div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: 1.3.0</span></div><header><h1 class="docTitle_1Lrw">Continuous Integration</h1></header><div class="markdown"><p>Playwright tests can be executed in CI environments. We have created sample
configurations for common CI providers.</p><ul><li><a href="#introduction">Introduction</a></li><li><a href="#ci-configurations">CI configurations</a><ul><li><a href="#github-actions">GitHub Actions</a></li><li><a href="#docker">Docker</a></li><li><a href="#azure-pipelines">Azure Pipelines</a></li><li><a href="#travis-ci">Travis CI</a></li><li><a href="#circleci">CircleCI</a></li><li><a href="#bitbucket-pipelines">Bitbucket Pipelines</a></li><li><a href="#gitlab-ci">GitLab CI</a></li></ul></li><li><a href="#caching-browsers">Caching browsers</a><ul><li><a href="#exception-nodemodules-are-cached">Exception: <code>node_modules</code> are cached</a></li><li><a href="#directories-to-cache">Directories to cache</a></li></ul></li><li><a href="#debugging-browser-launches">Debugging browser launches</a></li><li><a href="#running-headful">Running headful</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>3 steps to get your tests running on CI:</p><ol><li><strong>Ensure CI agent can run browsers</strong>: Use <a href="/playwright/docs/1.3.0/docker/README">our Docker image</a>
in Linux agents. Windows and macOS agents do not require any additional dependencies.</li><li><strong>Install Playwright</strong>: In most projects, this would be done with <code>npm ci</code>
(or <code>npm install</code>). Playwright would install the relevant browsers automatically.</li><li><strong>Run your tests</strong>: Use <code>npm test</code> or equivalent to execute your tests.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ci-configurations"></a>CI configurations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ci-configurations" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="github-actions"></a>GitHub Actions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#github-actions" title="Direct link to heading">#</a></h3><p>The <a href="https://github.com/microsoft/playwright-github-action" target="_blank" rel="noopener noreferrer">Playwright GitHub Action</a> can be used to run Playwright tests on GitHub Actions.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> microsoft/playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">action@v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Run your tests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> npm test</span></div></div></div></div></div><p>We run <a href="/playwright/.github/workflows/tests.yml">our tests</a> on GitHub Actions, across a matrix of 3 platforms (Windows, Linux, macOS) and 3 browsers (Chromium, Firefox, WebKit).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="docker"></a>Docker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#docker" title="Direct link to heading">#</a></h3><p>We have a <a href="/playwright/docs/1.3.0/docker/README">pre-built Docker image</a> which can either be used directly, or as a reference to update your existing Docker definitions.</p><p>Suggested configuration</p><ol><li><p>By default, Docker runs a container with a <code>/dev/shm</code> shared memory space 64MB.
This is <a href="https://github.com/c0b/chrome-in-docker/issues/1" target="_blank" rel="noopener noreferrer">typically too small</a> for Chromium
and will cause Chromium to crash when rendering large pages. To fix, run the container with
<code>docker run --shm-size=1gb</code> to increase the size of <code>/dev/shm</code>. Since Chromium 65, this is no
longer necessary. Instead, launch the browser with the <code>--disable-dev-shm-usage</code> flag:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">chromium</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">launch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;--disable-dev-shm-usage&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>This will write shared memory files into <code>/tmp</code> instead of <code>/dev/shm</code>. See
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=736452" target="_blank" rel="noopener noreferrer">crbug.com/736452</a> for more details.</p></li><li><p>Using <code>--ipc=host</code> is also recommended when using Chromiumâ€”without it Chromium can run out of memory
and crash. Learn more about this option in <a href="https://docs.docker.com/engine/reference/run/#ipc-settings---ipc" target="_blank" rel="noopener noreferrer">Docker docs</a>.</p></li><li><p>Seeing other weird errors when launching Chromium? Try running your container
with <code>docker run --cap-add=SYS_ADMIN</code> when developing locally. Since the Dockerfile
adds a <code>pwuser</code> user as a non-privileged user, it may not have all the necessary privileges.</p></li><li><p><a href="https://github.com/Yelp/dumb-init" target="_blank" rel="noopener noreferrer">dumb-init</a> is worth checking out if you&#x27;re
experiencing a lot of zombies Chromium processes sticking around. There&#x27;s special
treatment for processes with PID=1, which makes it hard to terminate Chromium
properly in some cases (e.g. in Docker).</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="azure-pipelines"></a>Azure Pipelines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#azure-pipelines" title="Direct link to heading">#</a></h3><p>For Windows or macOS agents, no additional configuration required, just install Playwright and run your tests.</p><p>For Linux agents, you can use <a href="/playwright/docs/1.3.0/docker/README">our Docker container</a> with Azure Pipelines support for <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/process/container-phases?view=azure-devops" target="_blank" rel="noopener noreferrer">running containerized jobs</a>. Alternatively, you can refer to the <a href="/playwright/docs/1.3.0/docker/README">Dockerfile</a> to see additional dependencies that need to be installed on a Ubuntu agent.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">pool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">vmImage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ubuntu-18.04&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mcr.microsoft.com/playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">bionic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> npm install</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> npm run test</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="travis-ci"></a>Travis CI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#travis-ci" title="Direct link to heading">#</a></h3><p>We run our tests on Travis CI over a Linux agent (Ubuntu 18.04).</p><p>Suggested configuration</p><ol><li><a href="http://man7.org/linux/man-pages/man7/user_namespaces.7.html" target="_blank" rel="noopener noreferrer">User namespace cloning</a>
should be enabled to support proper sandboxing</li><li><a href="https://en.wikipedia.org/wiki/Xvfb" target="_blank" rel="noopener noreferrer">xvfb</a> should be launched in order to run
Chromium in non-headless mode (e.g. to test Chrome Extensions)</li><li>If your project does not have <code>package-lock.json</code>, Travis would be auto-caching
<code>node_modules</code> directory. If you run <code>npm install</code> (instead of <code>npm ci</code>), it is
possible that the browser binaries are not downloaded. Fix this with <a href="#exception-nodemodules-are-cached">these steps</a> outlined below.</li></ol><p>To sum up, your <code>.travis.yml</code> might look like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">language</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> node_js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">dist</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> bionic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">addons</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">apt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">packages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># These are required to run webkit  </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libwoff1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libopus0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libwebp6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libwebpdemux2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libenchant1c2a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libgudev</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libsecret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libhyphen0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libgdk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">pixbuf2.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libegl1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libgles2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libevent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">2.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libnotify4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libxslt1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libvpx5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># gstreamer and plugins to support video playback in WebKit.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> gstreamer1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">gl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> gstreamer1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">base</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> gstreamer1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">good</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> gstreamer1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">bad</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This is required to run chromium</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> libgbm1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># this is needed for running headful tests</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> xvfb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># allow headful tests</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">before_install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Enable user namespace cloning</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sysctl kernel.unprivileged_userns_clone=1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Launch XVFB</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;export DISPLAY=:99.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sh -e /etc/init.d/xvfb start&quot;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="circleci"></a>CircleCI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#circleci" title="Direct link to heading">#</a></h3><p>We run our tests on CircleCI, with our <a href="/playwright/docs/1.3.0/docker/README">pre-built Docker image</a>. Running Playwright smoothly on CircleCI requires the following steps:</p><ol><li><p>Use the pre-built <a href="/playwright/docs/1.3.0/docker/README">Docker image</a> in your config like so:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mcr.microsoft.com/playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">bionic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">NODE_ENV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> development </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Needed if playwright is in `devDependencies`</span></div></div></div></div></div></li><li><p>If youâ€™re using Playwright through Jest, then you may encounter an error spawning child processes:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[00:00.0]  jest args: --e2e --spec --max-workers=36</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Error: spawn ENOMEM</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   at ChildProcess.spawn (internal/child_process.js:394:11)</span></div></div></div></div></div><p>This is likely caused by Jest autodetecting the number of processes on the entire machine (<code>36</code>) rather than the number allowed to your container (<code>2</code>). To fix this, set <code>jest --maxWorkers=2</code> in your test command.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bitbucket-pipelines"></a>Bitbucket Pipelines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bitbucket-pipelines" title="Direct link to heading">#</a></h3><p>Bitbucket Pipelines can use public <a href="https://confluence.atlassian.com/bitbucket/use-docker-images-as-build-environments-792298897.html" target="_blank" rel="noopener noreferrer">Docker images as build environments</a>. To run Playwright tests on Bitbucket, use our public Docker image (<a href="/playwright/docs/1.3.0/docker/README">see Dockerfile</a>).</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mcr.microsoft.com/playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">bionic</span></div></div></div></div></div><p>While the Docker image supports sandboxing for Chromium, it does not work in the Bitbucket Pipelines environment. To launch Chromium on Bitbucket Pipelines, use the <code>chromiumSandbox: false</code> launch argument.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> chromium </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;playwright&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> chromium</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">launch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> chromiumSandbox</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="gitlab-ci"></a>GitLab CI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#gitlab-ci" title="Direct link to heading">#</a></h3><p>To run Playwright tests on GitLab, use our public Docker image (<a href="/playwright/docs/1.3.0/docker/README">see Dockerfile</a>).</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-yml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">tests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">stage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mcr.microsoft.com/playwright</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">bionic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> npm install </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This should install playwright</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> npm run test</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="caching-browsers"></a>Caching browsers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#caching-browsers" title="Direct link to heading">#</a></h2><p>By default, Playwright downloads browser binaries when the Playwright NPM package
is installed. The NPM packages have a <code>postinstall</code> hook that downloads the browser
binaries. This behavior can be <a href="/playwright/docs/1.3.0/installation">customized with environment variables</a>.</p><p>Caching browsers on CI is <strong>strictly optional</strong>: The <code>postinstall</code> hooks should
execute and download the browser binaries on every run.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="exception-node_modules-are-cached"></a>Exception: <code>node_modules</code> are cached<a aria-hidden="true" tabindex="-1" class="hash-link" href="#exception-node_modules-are-cached" title="Direct link to heading">#</a></h4><p>Most CI providers cache the <a href="https://docs.npmjs.com/cli-commands/cache.html" target="_blank" rel="noopener noreferrer">npm-cache</a>
directory (located at <code>$HOME/.npm</code>). If your CI pipelines caches the <code>node_modules</code>
directory and you run <code>npm install</code> (instead of <code>npm ci</code>), the default configuration
<strong>will not work</strong>. This is because the <code>npm install</code> step will find the Playwright NPM
package on disk and not execute the <code>postinstall</code> step.</p><blockquote><p>Travis CI automatically caches <code>node_modules</code> if your repo does not have a
<code>package-lock.json</code> file.</p></blockquote><p>This behavior can be fixed with one of the following approaches:</p><ol><li>Move to caching <code>$HOME/.npm</code> or the npm-cache directory. (This is the default
behavior in most CI providers.)</li><li>Set <code>PLAYWRIGHT_BROWSERS_PATH=0</code> as the environment variable before running
<code>npm install</code>. This will download the browser binaries in the <code>node_modules</code>
directory and cache them with the package code. See <a href="/playwright/docs/1.3.0/installation">installation docs</a>.</li><li>Use <code>npm ci</code> (instead of <code>npm install</code>) which forces a clean install: by
removing the existing <code>node_modules</code> directory. See <a href="https://docs.npmjs.com/cli/ci.html" target="_blank" rel="noopener noreferrer">npm docs</a>.</li><li>Cache the browser binaries, with the steps below.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="directories-to-cache"></a>Directories to cache<a aria-hidden="true" tabindex="-1" class="hash-link" href="#directories-to-cache" title="Direct link to heading">#</a></h4><p>With the default behavior, Playwright downloads the browser binaries in the following
directories:</p><ul><li><code>%USERPROFILE%\AppData\Local\ms-playwright</code> on Windows</li><li><code>~/Library/Caches/ms-playwright</code> on MacOS</li><li><code>~/.cache/ms-playwright</code> on Linux</li></ul><p>To cache the browser downloads between CI runs, cache this location in your CI
configuration, against a hash of the Playwright version.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging-browser-launches"></a>Debugging browser launches<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-browser-launches" title="Direct link to heading">#</a></h2><p>Playwright supports the <code>DEBUG</code> environment variable to output debug logs during execution. Setting it to <code>pw:browser*</code> is helpful while debugging <code>Error: Failed to launch browser</code> errors.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">DEBUG=pw:browser* npm run test</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-headful"></a>Running headful<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-headful" title="Direct link to heading">#</a></h2><p>By default, Playwright launches browsers in headless mode. This can be changed by passing a flag when the browser is launched.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Works across chromium, firefox and webkit</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> chromium </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;playwright&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> browser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> chromium</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">launch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> headless</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>On Linux agents, headful execution requires <a href="https://en.wikipedia.org/wiki/Xvfb" target="_blank" rel="noopener noreferrer">Xvfb</a> to be installed. Our <a href="/playwright/docs/1.3.0/docker/README">Docker image</a> and GitHub Action have Xvfb pre-installed. To run browsers in headful mode with Xvfb, add <code>xvfb-run</code> before the Node.js command.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">xvfb-run node index.js</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/versioned_docs/version-1.3.0/ci.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/playwright/docs/1.3.0/docker/README"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Running Playwright in Docker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/playwright/docs/1.3.0/actionability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Actionability Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#ci-configurations" class="table-of-contents__link">CI configurations</a><ul><li><a href="#github-actions" class="table-of-contents__link">GitHub Actions</a></li><li><a href="#docker" class="table-of-contents__link">Docker</a></li><li><a href="#azure-pipelines" class="table-of-contents__link">Azure Pipelines</a></li><li><a href="#travis-ci" class="table-of-contents__link">Travis CI</a></li><li><a href="#circleci" class="table-of-contents__link">CircleCI</a></li><li><a href="#bitbucket-pipelines" class="table-of-contents__link">Bitbucket Pipelines</a></li><li><a href="#gitlab-ci" class="table-of-contents__link">GitLab CI</a></li></ul></li><li><a href="#caching-browsers" class="table-of-contents__link">Caching browsers</a></li><li><a href="#debugging-browser-launches" class="table-of-contents__link">Debugging browser launches</a></li><li><a href="#running-headful" class="table-of-contents__link">Running headful</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/playwright/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/playwright/docs/api/playwright-module">API reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://aka.ms/playwright-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/playwrightweb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Microsoft</div></div></div></footer></div>
<script src="/playwright/styles.b0f0421f.js"></script>
<script src="/playwright/runtime~main.6c9d03b3.js"></script>
<script src="/playwright/main.2f8db9db.js"></script>
<script src="/playwright/1.b8352433.js"></script>
<script src="/playwright/2.a926225b.js"></script>
<script src="/playwright/806.43b743a8.js"></script>
<script src="/playwright/809.0c99d459.js"></script>
<script src="/playwright/5188416b.77c6a0bf.js"></script>
<script src="/playwright/17896441.a1329f6b.js"></script>
<script src="/playwright/bc276927.b632cf0f.js"></script>
</body>
</html>