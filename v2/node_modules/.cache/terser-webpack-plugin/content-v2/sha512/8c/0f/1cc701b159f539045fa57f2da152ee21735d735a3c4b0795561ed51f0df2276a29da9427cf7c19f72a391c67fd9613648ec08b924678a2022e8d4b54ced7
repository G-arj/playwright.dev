{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[704],{762:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"frontMatter\",(function(){return r})),a.d(t,\"metadata\",(function(){return c})),a.d(t,\"rightToc\",(function(){return s})),a.d(t,\"default\",(function(){return b}));var n=a(2),i=a(6),o=(a(0),a(866)),r={id:\"auth\",title:\"Authentication\"},c={unversionedId:\"auth\",id:\"version-1.6.1/auth\",isDocsHomePage:!1,title:\"Authentication\",description:\"Playwright can be used to automate scenarios that require authentication.\",source:\"@site/versioned_docs/version-1.6.1/auth.md\",slug:\"/auth\",permalink:\"/playwright/docs/1.6.1/auth\",editUrl:\"https://github.com/facebook/docusaurus/edit/master/website/versioned_docs/version-1.6.1/auth.md\",version:\"1.6.1\",sidebar:\"version-1.6.1/docs\",previous:{title:\"Multi-page scenarios\",permalink:\"/playwright/docs/1.6.1/multi-pages\"},next:{title:\"Page Object Models\",permalink:\"/playwright/docs/1.6.1/pom\"}},s=[{value:\"Automate logging in\",id:\"automate-logging-in\",children:[]},{value:\"Reuse authentication state\",id:\"reuse-authentication-state\",children:[{value:\"Cookies\",id:\"cookies\",children:[]},{value:\"Local storage\",id:\"local-storage\",children:[]},{value:\"Session storage\",id:\"session-storage\",children:[]},{value:\"Lifecycle\",id:\"lifecycle\",children:[]},{value:\"Example\",id:\"example\",children:[]},{value:\"API reference\",id:\"api-reference\",children:[]}]},{value:\"Multi-factor authentication\",id:\"multi-factor-authentication\",children:[{value:\"Persistent authentication\",id:\"persistent-authentication\",children:[]},{value:\"Lifecycle\",id:\"lifecycle-1\",children:[]},{value:\"API reference\",id:\"api-reference-1\",children:[]}]}],l={rightToc:s};function b(e){var t=e.components,a=Object(i.a)(e,[\"components\"]);return Object(o.b)(\"wrapper\",Object(n.a)({},l,a,{components:t,mdxType:\"MDXLayout\"}),Object(o.b)(\"p\",null,\"Playwright can be used to automate scenarios that require authentication.\"),Object(o.b)(\"p\",null,\"Tests written with Playwright execute in isolated clean-slate environments called\\n\",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/playwright/docs/1.6.1/core-concepts#browser-contexts\"}),\"browser contexts\"),\". This isolation model\\nimproves reproducibility and prevents cascading test failures. New browser\\ncontexts can load existing authentication state. This eliminates the need to\\nlogin in every context and speeds up test execution.\"),Object(o.b)(\"blockquote\",null,Object(o.b)(\"p\",{parentName:\"blockquote\"},\"Note: This guide covers cookie/token-based authentication (logging in via the\\napp UI). For \",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication\"}),\"HTTP authentication\"),\"\\nuse \",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/playwright/docs/1.6.1/network#http-authentication\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"browser.newContext\")),\".\")),Object(o.b)(\"ul\",null,Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#automate-logging-in\"}),\"Automate logging in\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#reuse-authentication-state\"}),\"Reuse authentication state\"),Object(o.b)(\"ul\",{parentName:\"li\"},Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#cookies\"}),\"Cookies\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#local-storage\"}),\"Local storage\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#session-storage\"}),\"Session storage\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#lifecycle\"}),\"Lifecycle\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#example\"}),\"Example\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#api-reference\"}),\"API reference\")))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#multi-factor-authentication\"}),\"Multi-factor authentication\"),Object(o.b)(\"ul\",{parentName:\"li\"},Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#persistent-authentication\"}),\"Persistent authentication\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#lifecycle-1\"}),\"Lifecycle\")),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"#api-reference-1\"}),\"API reference\"))))),Object(o.b)(\"h2\",{id:\"automate-logging-in\"},\"Automate logging in\"),Object(o.b)(\"p\",null,\"The Playwright API can automate interaction with a login form. See\\n\",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/playwright/docs/1.6.1/input\"}),\"Input guide\"),\" for more details.\"),Object(o.b)(\"p\",null,\"The following example automates login on GitHub. Once these steps are executed,\\nthe browser context will be authenticated.\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-js\"}),\"const page = await context.newPage();\\nawait page.goto('https://github.com/login');\\n\\n// Interact with login form\\nawait page.click('text=Login');\\nawait page.fill('input[name=\\\"login\\\"]', USERNAME);\\nawait page.fill('input[name=\\\"password\\\"]', PASSWORD);\\nawait page.click('text=Submit');\\n// Verify app is logged in\\n\")),Object(o.b)(\"p\",null,\"These steps can be executed for every browser context. However, redoing login\\nfor every test can slow down test execution. To prevent that, we will reuse\\nexisting authentication state in new browser contexts.\"),Object(o.b)(\"h2\",{id:\"reuse-authentication-state\"},\"Reuse authentication state\"),Object(o.b)(\"p\",null,\"Web apps use cookie-based or token-based authentication, where authenticated\\nstate is stored as \",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\"}),\"cookies\"),\"\\nor in \",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Storage\"}),\"local storage\"),\".\\nThe Playwright API can be used to retrieve this state from authenticated contexts\\nand then load it into new contexts.\"),Object(o.b)(\"p\",null,\"Cookies and local storage state can be used across different browsers. They depend\\non your application's authentication model: some apps might require both cookies\\nand local storage.\"),Object(o.b)(\"p\",null,\"The following code snippets retrieve state from an authenticated page/context and\\nload them into a new context.\"),Object(o.b)(\"h3\",{id:\"cookies\"},\"Cookies\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-js\"}),\"// Get cookies and store as an env variable\\nconst cookies = await context.cookies();\\nprocess.env.COOKIES = JSON.stringify(cookies);\\n\\n// Set cookies in a new context\\nconst deserializedCookies = JSON.parse(process.env.COOKIES)\\nawait context.addCookies(deserializedCookies);\\n\")),Object(o.b)(\"h3\",{id:\"local-storage\"},\"Local storage\"),Object(o.b)(\"p\",null,\"Local storage (\",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"window.localStorage\")),\")\\nis specific to a particular domain.\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-js\"}),\"// Get local storage and store as env variable\\nconst localStorage = await page.evaluate(() => JSON.stringify(window.localStorage));\\nprocess.env.LOCAL_STORAGE = localStorage;\\n\\n// Set local storage in a new context\\nconst localStorage = process.env.LOCAL_STORAGE;\\nawait context.addInitScript(storage => {\\n  if (window.location.hostname === 'example.com') {\\n    const entries = JSON.parse(storage);\\n    Object.keys(entries).forEach(key => {\\n      window.localStorage.setItem(key, entries[key]);\\n    });\\n  }\\n}, localStorage);\\n\")),Object(o.b)(\"h3\",{id:\"session-storage\"},\"Session storage\"),Object(o.b)(\"p\",null,\"Session storage (\",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"window.sessionStorage\")),\")\\nis specific to a particular domain.\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-js\"}),\"// Get session storage and store as env variable\\nconst sessionStorage = await page.evaluate(() => JSON.stringify(sessionStorage));\\nprocess.env.SESSION_STORAGE = sessionStorage;\\n\\n// Set session storage in a new context\\nconst sessionStorage = process.env.SESSION_STORAGE;\\nawait context.addInitScript(storage => {\\n  if (window.location.hostname === 'example.com') {\\n    const entries = JSON.parse(storage);\\n    Object.keys(entries).forEach(key => {\\n      window.sessionStorage.setItem(key, entries[key]);\\n    });\\n  }\\n}, sessionStorage);\\n\")),Object(o.b)(\"h3\",{id:\"lifecycle\"},\"Lifecycle\"),Object(o.b)(\"p\",null,\"Logging in via the UI and then reusing authentication state can be combined to\\nimplement \",Object(o.b)(\"strong\",{parentName:\"p\"},\"login once and run multiple scenarios\"),\". The lifecycle looks like:\"),Object(o.b)(\"ol\",null,Object(o.b)(\"li\",{parentName:\"ol\"},\"Run tests (for example, with \",Object(o.b)(\"inlineCode\",{parentName:\"li\"},\"npm run test\"),\").\"),Object(o.b)(\"li\",{parentName:\"ol\"},\"Login via UI and retrieve authentication state.\",Object(o.b)(\"ul\",{parentName:\"li\"},Object(o.b)(\"li\",{parentName:\"ul\"},\"In Jest, this can be executed in \",Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"https://jestjs.io/docs/en/configuration#globalsetup-string\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"globalSetup\")),\".\"))),Object(o.b)(\"li\",{parentName:\"ol\"},\"In each test, load authentication state in \",Object(o.b)(\"inlineCode\",{parentName:\"li\"},\"beforeEach\"),\" or \",Object(o.b)(\"inlineCode\",{parentName:\"li\"},\"beforeAll\"),\" step.\")),Object(o.b)(\"p\",null,\"This approach will also \",Object(o.b)(\"strong\",{parentName:\"p\"},\"work in CI environments\"),\", since it does not rely\\non any external state.\"),Object(o.b)(\"h3\",{id:\"example\"},\"Example\"),Object(o.b)(\"p\",null,Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"examples/authentication.js\"}),\"This example script\"),\" logs in on GitHub.com with\\nChromium, and then reuses the logged in cookie state in WebKit.\"),Object(o.b)(\"h3\",{id:\"api-reference\"},\"API reference\"),Object(o.b)(\"ul\",null,Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browser#class-browsercontext\"}),\"class \",Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"BrowserContext\"))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextcookiesurls\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"browserContext.cookies\"))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextaddcookiescookies\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"browserContext.addCookies\"))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-page#pageevaluatepagefunction-arg\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"page.evaluate\"))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextaddinitscriptscript-arg\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"browserContext.addInitScript\")))),Object(o.b)(\"h2\",{id:\"multi-factor-authentication\"},\"Multi-factor authentication\"),Object(o.b)(\"p\",null,\"Accounts with multi-factor authentication (MFA) cannot be fully automated, and need\\nmanual intervention. Persistent authentication can be used to partially automate\\nMFA scenarios.\"),Object(o.b)(\"h3\",{id:\"persistent-authentication\"},\"Persistent authentication\"),Object(o.b)(\"p\",null,\"Web browsers use a directory on disk to store user history, cookies, IndexedDB\\nand other local state. This disk location is called the \",Object(o.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md\"}),\"User data directory\"),\".\"),Object(o.b)(\"p\",null,\"Note that persistent authentication is not suited for CI environments since it\\nrelies on a disk location. User data directories are specific to browser types\\nand cannot be shared across browser types.\"),Object(o.b)(\"p\",null,\"User data directories can be used with the \",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"launchPersistentContext\"),\" API.\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-js\"}),\"const { chromium } = require('playwright');\\n\\nconst userDataDir = '/path/to/directory';\\nconst context = await chromium.launchPersistentContext(userDataDir, { headless: false });\\n// Execute login steps manually in the browser window\\n\")),Object(o.b)(\"h3\",{id:\"lifecycle-1\"},\"Lifecycle\"),Object(o.b)(\"ol\",null,Object(o.b)(\"li\",{parentName:\"ol\"},\"Create a user data directory on disk\"),Object(o.b)(\"li\",{parentName:\"ol\"},\"Launch a persistent context with the user data directory and login the MFA account.\"),Object(o.b)(\"li\",{parentName:\"ol\"},\"Reuse user data directory to run automation scenarios.\")),Object(o.b)(\"h3\",{id:\"api-reference-1\"},\"API reference\"),Object(o.b)(\"ul\",null,Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browsercontext#class-browsercontext\"}),\"class \",Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"BrowserContext\"))),Object(o.b)(\"li\",{parentName:\"ul\"},Object(o.b)(\"a\",Object(n.a)({parentName:\"li\"},{href:\"/playwright/docs/1.6.1/api/class-browsertype#browsertypelaunchpersistentcontextuserdatadir-options\"}),Object(o.b)(\"inlineCode\",{parentName:\"a\"},\"browserType.launchPersistentContext\")))))}b.isMDXComponent=!0},866:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return p})),a.d(t,\"b\",(function(){return h}));var n=a(0),i=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=i.a.createContext({}),b=function(e){var t=i.a.useContext(l),a=t;return e&&(a=\"function\"==typeof e?e(t):c(c({},t),e)),a},p=function(e){var t=b(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:\"code\",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,r=e.parentName,l=s(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),p=b(a),d=n,h=p[\"\".concat(r,\".\").concat(d)]||p[d]||u[d]||o;return a?i.a.createElement(h,c(c({ref:t},l),{},{components:a})):i.a.createElement(h,c({ref:t},l))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if(\"string\"==typeof e||n){var o=a.length,r=new Array(o);r[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType=\"string\"==typeof e?e:n,r[1]=c;for(var l=2;l<o;l++)r[l]=a[l];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,a)}d.displayName=\"MDXCreateElement\"}}]);","name":"e277f6d4.7a2119d6.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[704],{\n\n/***/ 762:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"frontMatter\", function() { return frontMatter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"metadata\", function() { return metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rightToc\", function() { return rightToc; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MDXContent; });\n/* harmony import */ var _home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(866);\nvar frontMatter={id:'auth',title:'Authentication'};var metadata={\"unversionedId\":\"auth\",\"id\":\"version-1.6.1/auth\",\"isDocsHomePage\":false,\"title\":\"Authentication\",\"description\":\"Playwright can be used to automate scenarios that require authentication.\",\"source\":\"@site/versioned_docs/version-1.6.1/auth.md\",\"slug\":\"/auth\",\"permalink\":\"/playwright/docs/1.6.1/auth\",\"editUrl\":\"https://github.com/facebook/docusaurus/edit/master/website/versioned_docs/version-1.6.1/auth.md\",\"version\":\"1.6.1\",\"sidebar\":\"version-1.6.1/docs\",\"previous\":{\"title\":\"Multi-page scenarios\",\"permalink\":\"/playwright/docs/1.6.1/multi-pages\"},\"next\":{\"title\":\"Page Object Models\",\"permalink\":\"/playwright/docs/1.6.1/pom\"}};/* @jsxRuntime classic */ /* @jsx mdx */var rightToc=[{value:'Automate logging in',id:'automate-logging-in',children:[]},{value:'Reuse authentication state',id:'reuse-authentication-state',children:[{value:'Cookies',id:'cookies',children:[]},{value:'Local storage',id:'local-storage',children:[]},{value:'Session storage',id:'session-storage',children:[]},{value:'Lifecycle',id:'lifecycle',children:[]},{value:'Example',id:'example',children:[]},{value:'API reference',id:'api-reference',children:[]}]},{value:'Multi-factor authentication',id:'multi-factor-authentication',children:[{value:'Persistent authentication',id:'persistent-authentication',children:[]},{value:'Lifecycle',id:'lifecycle-1',children:[]},{value:'API reference',id:'api-reference-1',children:[]}]}];var layoutProps={rightToc:rightToc};var MDXLayout=\"wrapper\";function MDXContent(_ref){var components=_ref.components,props=Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_ref,[\"components\"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(MDXLayout,Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},layoutProps,props,{components:components,mdxType:\"MDXLayout\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Playwright can be used to automate scenarios that require authentication.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Tests written with Playwright execute in isolated clean-slate environments called\\n\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"/playwright/docs/1.6.1/core-concepts#browser-contexts\"}),\"browser contexts\"),\". This isolation model\\nimproves reproducibility and prevents cascading test failures. New browser\\ncontexts can load existing authentication state. This eliminates the need to\\nlogin in every context and speeds up test execution.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"blockquote\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",{parentName:\"blockquote\"},\"Note: This guide covers cookie/token-based authentication (logging in via the\\napp UI). For \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication\"}),\"HTTP authentication\"),\"\\nuse \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"/playwright/docs/1.6.1/network#http-authentication\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"browser.newContext\")),\".\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#automate-logging-in\"}),\"Automate logging in\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#reuse-authentication-state\"}),\"Reuse authentication state\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",{parentName:\"li\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#cookies\"}),\"Cookies\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#local-storage\"}),\"Local storage\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#session-storage\"}),\"Session storage\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#lifecycle\"}),\"Lifecycle\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#example\"}),\"Example\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#api-reference\"}),\"API reference\")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#multi-factor-authentication\"}),\"Multi-factor authentication\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",{parentName:\"li\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#persistent-authentication\"}),\"Persistent authentication\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#lifecycle-1\"}),\"Lifecycle\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"#api-reference-1\"}),\"API reference\"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h2\",{\"id\":\"automate-logging-in\"},\"Automate logging in\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"The Playwright API can automate interaction with a login form. See\\n\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"/playwright/docs/1.6.1/input\"}),\"Input guide\"),\" for more details.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"The following example automates login on GitHub. Once these steps are executed,\\nthe browser context will be authenticated.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"pre\"},{\"className\":\"language-js\"}),\"const page = await context.newPage();\\nawait page.goto('https://github.com/login');\\n\\n// Interact with login form\\nawait page.click('text=Login');\\nawait page.fill('input[name=\\\"login\\\"]', USERNAME);\\nawait page.fill('input[name=\\\"password\\\"]', PASSWORD);\\nawait page.click('text=Submit');\\n// Verify app is logged in\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"These steps can be executed for every browser context. However, redoing login\\nfor every test can slow down test execution. To prevent that, we will reuse\\nexisting authentication state in new browser contexts.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h2\",{\"id\":\"reuse-authentication-state\"},\"Reuse authentication state\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Web apps use cookie-based or token-based authentication, where authenticated\\nstate is stored as \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\"}),\"cookies\"),\"\\nor in \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Storage\"}),\"local storage\"),\".\\nThe Playwright API can be used to retrieve this state from authenticated contexts\\nand then load it into new contexts.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Cookies and local storage state can be used across different browsers. They depend\\non your application's authentication model: some apps might require both cookies\\nand local storage.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"The following code snippets retrieve state from an authenticated page/context and\\nload them into a new context.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"cookies\"},\"Cookies\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"pre\"},{\"className\":\"language-js\"}),\"// Get cookies and store as an env variable\\nconst cookies = await context.cookies();\\nprocess.env.COOKIES = JSON.stringify(cookies);\\n\\n// Set cookies in a new context\\nconst deserializedCookies = JSON.parse(process.env.COOKIES)\\nawait context.addCookies(deserializedCookies);\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"local-storage\"},\"Local storage\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Local storage (\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"window.localStorage\")),\")\\nis specific to a particular domain.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"pre\"},{\"className\":\"language-js\"}),\"// Get local storage and store as env variable\\nconst localStorage = await page.evaluate(() => JSON.stringify(window.localStorage));\\nprocess.env.LOCAL_STORAGE = localStorage;\\n\\n// Set local storage in a new context\\nconst localStorage = process.env.LOCAL_STORAGE;\\nawait context.addInitScript(storage => {\\n  if (window.location.hostname === 'example.com') {\\n    const entries = JSON.parse(storage);\\n    Object.keys(entries).forEach(key => {\\n      window.localStorage.setItem(key, entries[key]);\\n    });\\n  }\\n}, localStorage);\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"session-storage\"},\"Session storage\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Session storage (\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"window.sessionStorage\")),\")\\nis specific to a particular domain.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"pre\"},{\"className\":\"language-js\"}),\"// Get session storage and store as env variable\\nconst sessionStorage = await page.evaluate(() => JSON.stringify(sessionStorage));\\nprocess.env.SESSION_STORAGE = sessionStorage;\\n\\n// Set session storage in a new context\\nconst sessionStorage = process.env.SESSION_STORAGE;\\nawait context.addInitScript(storage => {\\n  if (window.location.hostname === 'example.com') {\\n    const entries = JSON.parse(storage);\\n    Object.keys(entries).forEach(key => {\\n      window.sessionStorage.setItem(key, entries[key]);\\n    });\\n  }\\n}, sessionStorage);\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"lifecycle\"},\"Lifecycle\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Logging in via the UI and then reusing authentication state can be combined to\\nimplement \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"strong\",{parentName:\"p\"},\"login once and run multiple scenarios\"),\". The lifecycle looks like:\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ol\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"Run tests (for example, with \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"li\"},\"npm run test\"),\").\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"Login via UI and retrieve authentication state.\",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",{parentName:\"li\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},\"In Jest, this can be executed in \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"https://jestjs.io/docs/en/configuration#globalsetup-string\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"globalSetup\")),\".\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"In each test, load authentication state in \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"li\"},\"beforeEach\"),\" or \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"li\"},\"beforeAll\"),\" step.\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"This approach will also \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"strong\",{parentName:\"p\"},\"work in CI environments\"),\", since it does not rely\\non any external state.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"example\"},\"Example\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"examples/authentication.js\"}),\"This example script\"),\" logs in on GitHub.com with\\nChromium, and then reuses the logged in cookie state in WebKit.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"api-reference\"},\"API reference\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browser#class-browsercontext\"}),\"class \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"BrowserContext\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextcookiesurls\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"browserContext.cookies\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextaddcookiescookies\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"browserContext.addCookies\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-page#pageevaluatepagefunction-arg\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"page.evaluate\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browsercontext#browsercontextaddinitscriptscript-arg\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"browserContext.addInitScript\")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h2\",{\"id\":\"multi-factor-authentication\"},\"Multi-factor authentication\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Accounts with multi-factor authentication (MFA) cannot be fully automated, and need\\nmanual intervention. Persistent authentication can be used to partially automate\\nMFA scenarios.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"persistent-authentication\"},\"Persistent authentication\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Web browsers use a directory on disk to store user history, cookies, IndexedDB\\nand other local state. This disk location is called the \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"p\"},{\"href\":\"https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md\"}),\"User data directory\"),\".\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"Note that persistent authentication is not suited for CI environments since it\\nrelies on a disk location. User data directories are specific to browser types\\nand cannot be shared across browser types.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"p\",null,\"User data directories can be used with the \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"p\"},\"launchPersistentContext\"),\" API.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"pre\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"code\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"pre\"},{\"className\":\"language-js\"}),\"const { chromium } = require('playwright');\\n\\nconst userDataDir = '/path/to/directory';\\nconst context = await chromium.launchPersistentContext(userDataDir, { headless: false });\\n// Execute login steps manually in the browser window\\n\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"lifecycle-1\"},\"Lifecycle\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ol\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"Create a user data directory on disk\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"Launch a persistent context with the user data directory and login the MFA account.\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ol\"},\"Reuse user data directory to run automation scenarios.\")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"h3\",{\"id\":\"api-reference-1\"},\"API reference\"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"ul\",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browsercontext#class-browsercontext\"}),\"class \",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"BrowserContext\"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"li\",{parentName:\"ul\"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"a\",Object(_home_runner_work_playwright_dev_playwright_dev_v2_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({parentName:\"li\"},{\"href\":\"/playwright/docs/1.6.1/api/class-browsertype#browsertypelaunchpersistentcontextuserdatadir-options\"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_3__[/* mdx */ \"b\"])(\"inlineCode\",{parentName:\"a\"},\"browserType.launchPersistentContext\")))));};MDXContent.isMDXComponent=true;\n\n/***/ }),\n\n/***/ 866:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export MDXContext */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MDXProvider; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createElement; });\n/* unused harmony export useMDXComponents */\n/* unused harmony export withMDXComponents */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar isFunction = function isFunction(obj) {\n  return typeof obj === 'function';\n};\n\nvar MDXContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({});\nvar withMDXComponents = function withMDXComponents(Component) {\n  return function (props) {\n    var allComponents = useMDXComponents(props.components);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _extends({}, props, {\n      components: allComponents\n    }));\n  };\n};\nvar useMDXComponents = function useMDXComponents(components) {\n  var contextComponents = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(MDXContext);\n  var allComponents = contextComponents;\n\n  if (components) {\n    allComponents = isFunction(components) ? components(contextComponents) : _objectSpread2(_objectSpread2({}, contextComponents), components);\n  }\n\n  return allComponents;\n};\nvar MDXProvider = function MDXProvider(props) {\n  var allComponents = useMDXComponents(props.components);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MDXContext.Provider, {\n    value: allComponents\n  }, props.children);\n};\n\nvar TYPE_PROP_NAME = 'mdxType';\nvar DEFAULTS = {\n  inlineCode: 'code',\n  wrapper: function wrapper(_ref) {\n    var children = _ref.children;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, {}, children);\n  }\n};\nvar MDXCreateElement = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function (props, ref) {\n  var propComponents = props.components,\n      mdxType = props.mdxType,\n      originalType = props.originalType,\n      parentName = props.parentName,\n      etc = _objectWithoutProperties(props, [\"components\", \"mdxType\", \"originalType\", \"parentName\"]);\n\n  var components = useMDXComponents(propComponents);\n  var type = mdxType;\n  var Component = components[\"\".concat(parentName, \".\").concat(type)] || components[type] || DEFAULTS[type] || originalType;\n\n  if (propComponents) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _objectSpread2(_objectSpread2({\n      ref: ref\n    }, etc), {}, {\n      components: propComponents\n    }));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Component, _objectSpread2({\n    ref: ref\n  }, etc));\n});\nMDXCreateElement.displayName = 'MDXCreateElement';\nfunction createElement (type, props) {\n  var args = arguments;\n  var mdxType = props && props.mdxType;\n\n  if (typeof type === 'string' || mdxType) {\n    var argsLength = args.length;\n    var createElementArgArray = new Array(argsLength);\n    createElementArgArray[0] = MDXCreateElement;\n    var newProps = {};\n\n    for (var key in props) {\n      if (hasOwnProperty.call(props, key)) {\n        newProps[key] = props[key];\n      }\n    }\n\n    newProps.originalType = type;\n    newProps[TYPE_PROP_NAME] = typeof type === 'string' ? type : mdxType;\n    createElementArgArray[1] = newProps;\n\n    for (var i = 2; i < argsLength; i++) {\n      createElementArgArray[i] = args[i];\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement.apply(null, createElementArgArray);\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement.apply(null, args);\n}\n\n\n\n\n/***/ })\n\n}]);","inputSourceMap":null}